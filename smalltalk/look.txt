| locationString, locationDescription |
        locationString := currentLocation name.
        locationDescription := currentLocation description.

        locationString = 'homeless_bench' ifTrue: [
            Transcript show: 'You find yourself near a bench occupied by a homeless man, muttering under his breath.'; cr.
            (flags includes: 'first_homeless_interaction') ifFalse: [
                Transcript show: 'He warns of the ''shadows that follow at night'' and clutches an old bottle with'; cr.
                Transcript show: 'You notice that he cannot breathe properly, he probably ran out of cigarettes.'; cr.
            ].
            (inventory includes: 'cigarettes') ifTrue: [
                Transcript show: 'You notice that you can help the homeless man with a cigarette.'; cr.
            ].
            Transcript show: 'You can interact with him by typing: interact homeless'; cr.
            Transcript show: 'The parking area lies to the south.'; cr.
        ].

        locationString = 'hotel_basement' ifTrue: [
            Transcript show: 'The elevator can only go down.'; cr.
            Transcript show: 'It leads to the basement of the hotel.'; cr.
            Transcript show: 'The basement is dark and damp, with a faint, musty odor filling the air.'; cr.
            (isItemAt: 'amulet' inLocation: 'hotel_basement') ifTrue: [
                Transcript show: 'Among the piles of old crates and broken furniture, something stands out -'; cr.
                Transcript show: 'a strange amulet positioned in the center of the room.'; cr.
            ].
            (isItemAt: 'notes' inLocation: 'hotel_basement') ifTrue: [
                Transcript show: 'You notice a set of old, crumbling notes scattered across a dusty table.'; cr.
            ].
            Transcript show: 'You can go east to return to the hotel lobby.'; cr.
        ].

        locationString = 'archive' ifTrue: [
            Transcript show: 'You enter the archive room. It is small and cramped, filled with stacks of old papers and documents.'; cr.
            Transcript show: 'Most of the documents are unreadable due to age.'; cr.
            (isItemAt: 'greenFuse' inLocation: 'archive') ifTrue: [
                Transcript show: 'However you notice a bright green fuse lying on a nearby shelf.'; cr.
            ].
        ].

        locationString = 'parking' ifTrue: [
            Transcript show: 'You are in a deserted parking lot near the train station. The ground is littered'; cr.
            Transcript show: 'with old tickets and rusted cans. One car looks abandoned, as if the driver left in a hurry.'; cr.
            Transcript show: 'To the north, you can see a homeless man sitting on a bench.'; cr.
            Transcript show: 'To the south is the main street,'; cr.
            Transcript show: 'and the train station is to the east.'; cr.
            (hasItem: 'car_keys') ifTrue: [
                Transcript show: 'You have the car keys so you can try to open the abandoned car.'; cr.
                Transcript show: 'Type in enter_car in order to get into the vehicle.'; cr.
            ].
        ].

        locationString = 'car' ifTrue: [
            Transcript show: 'You sit inside the car, but it refuses to start.'; cr.
            Transcript show: 'Type in exit_car in order to get out of the vehicle.'; cr.
            (isItemAt: 'key' inLocation: 'car') ifTrue: [
                Transcript show: 'You noticed an old key lying on the passenger seat.'; cr.
            ].
        ].

        locationString = 'default' ifTrue: [
            Transcript show: locationDescription; cr.
        ].

        items := locationItems at: locationString ifAbsent: [#()].
        items isEmpty ifFalse: [
            inventory do: [ :item | 
                Transcript show: 'You see ', item printString, ' here.'; cr. 
            ].
        ].